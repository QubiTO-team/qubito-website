<style>
  .darkable-section {
    background-image: url("{{ .Params.overviewBackgroundImageLight }}");
  }

  .dark .darkable-section {
    background-image: url("{{ .Params.overviewBackgroundImage }}");
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const elements = document.querySelectorAll(".animate-on-scroll");

    const observer = new IntersectionObserver(
      (entries, observer) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
            observer.unobserve(entry.target); // Stop observing after the element is visible
          }
        });
      },
      { threshold: 0.2 }
    ); // Trigger when 20% of the element is in view

    elements.forEach((element) => observer.observe(element));
  });

  // Function to scroll the activities section
  const container = document.getElementById("activities");
  const scrollLeftBtn = document.getElementById("scroll-left");
  const scrollRightBtn = document.getElementById("scroll-right");
  const scrollButtons = document.getElementById("scroll-buttons");

  function updateScrollButtons() {
    const maxScrollLeft = container.scrollWidth - container.clientWidth;

    // If everything fits â€” hide buttons
    if (container.scrollWidth <= container.clientWidth) {
      scrollButtons.style.display = "none";
    } else {
      scrollButtons.style.display = "flex";
      scrollLeftBtn.disabled = container.scrollLeft <= 0;
      scrollRightBtn.disabled = container.scrollLeft >= maxScrollLeft - 1;
    }
  }

  function scrollActivities(direction) {
    const scrollAmount = 320;
    container.scrollBy({
      left: direction * scrollAmount,
      behavior: "smooth",
    });
  }

  // Add scroll listener
  container.addEventListener("scroll", updateScrollButtons);

  // Also check on load and on resize
  window.addEventListener("load", updateScrollButtons);
  window.addEventListener("resize", updateScrollButtons);
</script>

<div>
  <section
    class="darkable-section"
    style="
      position: relative;
      display: flex;
      align-items: center;
      background-size: cover;
      background-position: center;
      background-attachment: fixed; /* This keeps the background fixed while scrolling */
    "
  >
    <div class="overview-section middle-screen">
      <div class="overview-left">
        <h1 class="overview-title">
          {{ with site.GetPage "snippets/titleTypeIt" }} {{ .Content }} {{ end
          }}
        </h1>
        <p class="overview-description">{{ .Params.overviewDescription }}</p>
      </div>
      <div class="overview-keywords">
        {{ range .Params.overviewKeywords }}
        <span class="keyword">{{ . }}</span>
        {{ end }}
      </div>
    </div>
  </section>

  <section class="whoweare-section">
    <div class="whoweare-content">
      <h2>{{ .Params.whoWeAreTitle }}</h2>
      <p>{{ .Params.whoWeAreDescription }}</p>

      {{ with site.GetPage "snippets/whoWeAreButton" }} {{ .Content }} {{ end }}
    </div>
    <div class="whoweare-image-container animate-on-scroll">
      <img src="{{ .Params.whoWeAreImage }}" alt="Who We Are" />
    </div>
  </section>
  <!-- What We Do Section -->

  <section
    class="darkable-section"
    style="
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      background-size: cover;
      background-position: center;
      background-attachment: fixed; /* This keeps the background fixed while scrolling */
    "
  >
    <div class="overview-activities-section middle-screen">
      <div class="overview-left">
        <h1 class="overview-title">{{ .Params.activitiesTitle }}</h1>
        <p class="overview-description">{{ .Params.activitiesDescription }}</p>
      </div>
      {{ with site.GetPage "snippets/homepageTimeline" }} {{ .Content }} {{ end
      }}
    </div>

    <div class="activities-button">
      {{ with site.GetPage "snippets/activitiesButton" }} {{ .Content }} {{ end
      }}
    </div>
  </section>

  <!-- Sponsors Section -->
  <section class="whoweare-section">
    <div class="whoweare-content">
      <h2>{{ .Params.sponsorsTitle }}</h2>
      <p>{{ .Params.sponsorsDescription }}</p>

      {{ with site.GetPage "snippets/sponsorsButton" }} {{ .Content }} {{ end }}
    </div>
    <div class="whoweare-image-container animate-on-scroll">
      <img src="{{ .Params.sponsors }}" alt="Who We Are" />
    </div>
  </section>
</div>
