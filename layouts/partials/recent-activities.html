{{ $recentActivities := 4 }} {{ $translations := .AllTranslations }} {{
$activitiesFile := "content/activities/data/index.yaml" }} {{ $path :=
$activitiesFile }} {{ if eq .Site.Language.Lang "it" }} {{ $path =
$activitiesFile }} {{ else }} {{ $path = printf "%s.%s.yaml" (strings.TrimSuffix
".yaml" $activitiesFile) .Site.Language.Lang }} {{ end }} {{ $activitiesContent
:= "" }} {{ if fileExists $path }} {{ $activitiesContent = readFile $path }} {{
end }} {{ $allActivities := slice }} {{ if $activitiesContent }} {{
$allActivities = $activitiesContent | unmarshal }} {{ end }} {{
$activeActivities := where $allActivities "isActive" true }} {{
$inactiveActivities := where $allActivities "isActive" "!=" true }} {{ if gt
(len $activeActivities) 0 }}
<h2>{{ i18n "incomingEvents" }}</h2>
{{ partial "timeline" (dict "items" $activeActivities) }} {{ range
$activeActivities }} {{ partial "timelineItem" (dict "icon" .icon "header"
.header "badge" .badge "description" .description "link" .link "images" .images
"isMainActivity" .isMainActivity "isActive" .isActive) }} {{ end }} {{ end }} {{
if and (gt (len $inactiveActivities) 0) (gt (len $activeActivities) 0) }}
<hr />
{{end}} {{if gt (len $inactiveActivities) 0 }}
<h2>{{ i18n "pastEvents" }}</h2>
{{ partial "timeline" (dict "items" $inactiveActivities) }} {{ range
$inactiveActivities }} {{ partial "timelineItem" (dict "icon" .icon "header"
.header "badge" .badge "description" .description "link" .link "images" .images
"isMainActivity" .isMainActivity "isActive" .isActive) }} {{ end }} {{ end }}
