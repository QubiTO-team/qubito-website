<style>
  .darkable-section {
    background-image: url("{{ .Params.overviewBackgroundImageLight }}");
  }

  .dark .darkable-section {
    background-image: url("{{ .Params.overviewBackgroundImage }}");
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const baseDelay = 0; // Starting delay for the first item
    const delayIncrement = 1800; // Delay between each keyword animation in ms

    document.querySelectorAll(".typeit-keywords").forEach((el, index) => {
      new TypeIt(el, {
        speed: 100,
        lifeLike: true,
        startDelay: baseDelay + index * delayIncrement,
        breakLines: false,
        waitUntilVisible: true,
        loop: false,
        cursor: false,
      }).go();
    });
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const elements = document.querySelectorAll(".animate-on-scroll");

    const observer = new IntersectionObserver(
      (entries, observer) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
            observer.unobserve(entry.target); // Stop observing after the element is visible
          }
        });
      },
      { threshold: 0.2 }
    ); // Trigger when 20% of the element is in view

    elements.forEach((element) => observer.observe(element));
  });

  // Function to scroll the activities section
  const container = document.getElementById("activities");
  const scrollLeftBtn = document.getElementById("scroll-left");
  const scrollRightBtn = document.getElementById("scroll-right");
  const scrollButtons = document.getElementById("scroll-buttons");

  function updateScrollButtons() {
    const maxScrollLeft = container.scrollWidth - container.clientWidth;

    // If everything fits â€” hide buttons
    if (container.scrollWidth <= container.clientWidth) {
      scrollButtons.style.display = "none";
    } else {
      scrollButtons.style.display = "flex";
      scrollLeftBtn.disabled = container.scrollLeft <= 0;
      scrollRightBtn.disabled = container.scrollLeft >= maxScrollLeft - 1;
    }
  }

  function scrollActivities(direction) {
    const scrollAmount = 320;
    container.scrollBy({
      left: direction * scrollAmount,
      behavior: "smooth",
    });
  }

  // Add scroll listener
  container.addEventListener("scroll", updateScrollButtons);

  // Also check on load and on resize
  window.addEventListener("load", updateScrollButtons);
  window.addEventListener("resize", updateScrollButtons);
</script>

<div>
  <section
    class="darkable-section"
    style="
      position: relative;
      display: flex;
      align-items: center;
      background-size: cover;
      background-position: center;
      background-attachment: fixed; /* This keeps the background fixed while scrolling */
    "
  >
    <div class="overview-section middle-screen">
      <div class="overview-left">
        <h1 class="overview-title">{{ .Params.overviewTitle }}</h1>
        <p class="overview-description">{{ .Params.overviewDescription }}</p>
      </div>
      <div class="overview-keywords">
        {{ range .Params.overviewKeywords }}
        <span class="keyword">
          <p class="typeit-keywords">{{ . }}</p>
        </span>
        {{ end }}
      </div>
    </div>
  </section>

  <section class="whoweare-section">
    <div class="whoweare-content">
      <h2>{{ .Params.whoWeAreTitle }}</h2>
      <p>{{ .Params.whoWeAreDescription }}</p>

      {{ with site.GetPage "snippets/whoWeAreButton" }} {{ .Content }} {{ end }}
    </div>
    <div class="whoweare-image-container animate-on-scroll">
      <img src="{{ .Params.whoWeAreImage }}" alt="Who We Are" />
    </div>
  </section>
  <!-- What We Do Section -->

  <section
    class="darkable-section"
    style="
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      background-size: cover;
      background-position: center;
      background-attachment: fixed; /* This keeps the background fixed while scrolling */
    "
  >
    <div class="overview-activities-section middle-screen">
      <div class="overview-left">
        <h1 class="overview-title">{{ .Params.activitiesTitle }}</h1>
        <p class="overview-description">{{ .Params.activitiesDescription }}</p>
      </div>
      {{ with site.GetPage "snippets/homepageTimeline" }} {{ .Content }} {{ end
      }}
    </div>

    <div class="activities-button">
      {{ with site.GetPage "snippets/activitiesButton" }} {{ .Content }} {{ end
      }}
    </div>
  </section>

  <section class="recent-articles-section">
    {{ partial "recent-articles/main.html" . }}
  </section>
  <!-- Sponsors Section -->
  {{/*
  <section class="whoweare-section">
    <div class="whoweare-content">
      <h2>{{ .Params.sponsorsTitle }}</h2>
      <p>{{ .Params.sponsorsDescription }}</p>

      {{ with site.GetPage "snippets/sponsorsButton" }} {{ .Content }} {{ end }}
    </div>
    <div class="whoweare-image-container animate-on-scroll">
      <img src="{{ .Params.sponsors }}" alt="Who We Are" />
    </div>
  </section>
  */}}

  <section class="py-16 px-4 bg-gray-50 dark:bg-gray-800">
    <div class="max-w-6xl mx-auto">
      <!-- Header -->
      <div class="text-center mb-12">
        <h2
          class="text-3xl md:text-4xl font-bold mb-4 text-gray-900 dark:text-white"
        >
          Get in Touch with Us!
        </h2>
        <p class="text-lg text-gray-600 dark:text-gray-300">
          If you want to support us in our mission or join us on our journey,
          please don't hesitate to reach out. We are always grateful for the
          help and encouragement from our community.
        </p>
      </div>

      <!-- Contact Info -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
        <!-- Email -->
        <div class="p-6 bg-white dark:bg-gray-700 rounded-lg shadow-md">
          <h3 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">
            Contact Information
          </h3>
          <a
            href="mailto:qubito@polito.it"
            class="inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors duration-200"
          >
            Email: qubito@polito.it
          </a>
        </div>

        <!-- Social Media -->
        <div class="p-6 bg-white dark:bg-gray-700 rounded-lg shadow-md">
          <h3 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">
            Social Media
          </h3>
          <div class="space-y-2">
            <a
              href="https://www.instagram.com/qubitoteam_polito/"
              class="text-blue-600 dark:text-blue-400 hover:underline block"
              >Instagram</a
            >
            <a
              href="https://www.linkedin.com/company/qubito-student-team-politecnico-di-torino/"
              class="text-blue-600 dark:text-blue-400 hover:underline block"
              >LinkedIn</a
            >
          </div>
        </div>

        <!-- Partners -->
        <div class="p-6 bg-white dark:bg-gray-700 rounded-lg shadow-md">
          <h3 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">
            Our Partners
          </h3>
          <p class="font-medium text-gray-600 dark:text-gray-300">
            Main Partner:
          </p>
          <p class="text-gray-600 dark:text-gray-300">Politecnico di Torino</p>
        </div>
      </div>

      <!-- Footer Message -->
      <div class="text-center">
        <h3 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">
          We Appreciate Your Support!
        </h3>
        <p class="text-gray-600 dark:text-gray-300">
          Whether you have questions, suggestions, or just want to say hello,
          your input means the world to us. Thank you for being a part of our
          journey!
        </p>
      </div>
    </div>
  </section>
</div>
